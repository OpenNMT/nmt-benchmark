function getTable(t,e){var a={};t&&(a={sourceLanguage:t.substring(0,2),targetLanguage:t.substring(2)}),e&&(a.constraint="Yes"===e),$.get("/getDataTable",a).done(function(t){$("#mainTable").html(getTableHeader());var e=[{data:"systemName",className:"systemName",sDefaultContent:"",render:function(t,e,a){if(t)return'<a href="/translationSystem/view/'+a._id+'">'+t+"</a>"}}];$("#testFile .item").each(function(t,a){var n=$(a).attr("data-value"),s=$(a).hasClass("active")?" active":"";e.push({data:"scores",className:"testFile id_"+$(a).attr("data-value")+s,sDefaultContent:"",render:function(t,e,a){return t[n]?t[n].BLEU:""}})}),$("#mainTable table").DataTable({destroy:!0,searching:!1,info:!1,stateSave:!0,pagingType:"full_numbers",dom:"ftp",sAjaxDataProp:"",order:[[1,"desc"]],data:t.data,columns:e,drawCallback:function(t){$(".pagination.menu").addClass("floated right"),swapScores($('input[name="testSet"]').val()),setTestFileDropdownContent(getLanguagePair())}})}).fail(function(t){flash("error",t),console.log(t.statusText,t)})}function getTableHeader(){var t=[];return t.push('<table class="ui celled striped sortable table"><thead><tr>'),t.push('<th class="systemName">System name</th>'),$("#testFile .item").each(function(e,a){t.push('<th class="testFile id_'+$(a).attr("data-value")+'"></th>')}),t.push("</tr></thead></table>"),t.join("")}function swapScores(t){var e=getTestFileId();$("td.testFile").removeClass("active"),$("td.testFile.id_"+e).addClass("active")}function getTestFileId(){return $('input[name="testSet"]').val()||""}$(document).ready(function(){$(".ui.dropdown").dropdown(),$("#languagePairs .menu").text(defaultLP),setDropdownContent(),setTestFileDropdownContent(getLanguagePair()),$("#languagePairs").dropdown({onChange:function(t,e){getTable(getLanguagePair(),getConstraint())}}),$("#testFile").dropdown({onChange:function(t,e){swapScores(t)}}),$("#constraint").dropdown({onChange:function(t,e){getTable(getLanguagePair(),getConstraint())}}),$("#addSystemButton").on("click",function(){$('#addSystemForm input[name="languagePair"]').val(getLanguagePair()),$("#addSystemForm").submit()}),$("#addSystemButton").on("keypress",function(t){13!==t.which&&32!==t.which||(t.preventDefault(),$(t.target).trigger("click"))}),getTable()});