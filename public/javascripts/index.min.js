function getTable(t,e){var a={};t&&(a={sourceLanguage:t.substring(0,2),targetLanguage:t.substring(2)}),e&&(a.constraint="Yes"===e),$.get("/getDataTable",a).done(function(t){var e=[{data:"user",sDefaultContent:"",render:function(t,e,a){if(t)return'<a href="/userSystems/'+t.githubId+'"><img class="ui avatar image" src="'+t.avatarURL+'" alt="'+t.name+'"/><span class="userName">'+t.name+"</span></a>"}},{data:"systemName",className:"systemName",sDefaultContent:"",render:function(t,e,a){if(t)return'<a href="/translationSystem/view/'+a._id+'">'+t+"</a>"}},{data:"constraint",sDefaultContent:"",render:function(t,e,a){return t?"Yes":"No"}},{data:"date",sDefaultContent:"",render:function(t,e,a){if(t){var n=new Date(t);return n.toLocaleDateString()}}},{data:"scores",className:"scores",sDefaultContent:"",render:function(t,e,a){var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push('<div class="testFile id_'+o+'">'+t[o].BLEU+"</div>");return n.join("")}}];$("#mainTable table").DataTable({destroy:!0,searching:!1,info:!1,stateSave:!0,pagingType:"full_numbers",dom:"ftp",sAjaxDataProp:"",order:[[2,"desc"]],data:t.data,columns:e,drawCallback:function(t){$(".pagination.menu").addClass("floated right"),$("i.toggle.icon").popup(),swapScores($('input[name="testSet"]').val()),setTestFileDropdownContent(getLanguagePair())}})}).fail(function(t){flash("error",t),console.log(t.statusText,t)})}function swapScores(t){function e(t){var e=$(".scores .id_"+t);e.transition({duration:a.duration.show,animation:a.animation.show})}var a={animation:{show:"fade left",hide:"fade right"},duration:{show:750,hide:250}},n=getTestFileId(),o=$(".scores .testFile:visible"),i=0;o.length?$.each(o,function(){$(this).transition({duration:a.duration.hide,animation:a.animation.hide,onComplete:function(){i++,i===o.length&&e(n)}})}):e(n)}function getTestFileId(){return $('input[name="testSet"]').val()||""}$(document).ready(function(){$(".ui.dropdown").dropdown(),$("#languagePairs .menu").text(defaultLP),setDropdownContent(),setTestFileDropdownContent(getLanguagePair()),$("#languagePairs").dropdown({onChange:function(t,e){getTable(getLanguagePair(),getConstraint())}}),$("#testFile").dropdown({onChange:function(t,e){swapScores(t)}}),$("#constraint").dropdown({onChange:function(t,e){getTable(getLanguagePair(),getConstraint())}}),$("#addSystemButton").on("click",function(){$('#addSystemForm input[name="languagePair"]').val(getLanguagePair()),$("#addSystemForm").submit()}),$("#addSystemButton").on("keypress",function(t){13!==t.which&&32!==t.which||(t.preventDefault(),$(t.target).trigger("click"))}),getTable()});