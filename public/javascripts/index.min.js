function getTable(a){var e={sourceLanguage:a.substring(0,2),targetLanguage:a.substring(2)},t=['<table class="ui celled striped table"><thead><tr>','<th class="user">User</th>','<th class="systemName">System name</th>'];getBest(testSets,a).forEach(function(a){t.push('<th data-id="'+a.source.fileName+'">'+a.source.fileName+"</th>")}),t.push("</tr></thead></table>"),$("#mainTable").html(t.join("")),$.get("/getDataTable",e).done(function(e){var t=[{data:"user",sDefaultContent:"",render:function(a,e,t){return a?'<a href="/userSystems/'+a.githubId+'"><img class="ui avatar image" src="'+a.avatarURL+'" />'+a.name+"</a>":""}},{data:"systemName",className:"systemName",sDefaultContent:"",render:function(a,e,t){return a?'<a href="/translationSystem/view/'+t._id+'">'+a+"</a>":""}}];$.each(getBest(testSets,a),function(e,n){n.source.language+n.target.language===a&&t.push({data:n.source.fileName,sDefaultContent:"",searchable:!1,render:function(a,e,t){return t.scores[n._id]?t.scores[n._id].BLEU:""}})}),$("#mainTable table").DataTable({destroy:!0,searching:!1,info:!1,stateSave:!0,pagingType:"full_numbers",dom:"tp",sAjaxDataProp:"",order:[2,"desc"],data:e.data,columns:t,drawCallback:function(a){$(".pagination.menu").addClass("floated right")}})}).fail(function(a){flash("error",a),console.log(a.statusText,a)})}function getLanguagePair(){return $("#languagePairs").dropdown("get value")||defaultLP}function getBest(a,e){return a.filter(function(a){return a.source.language+a.target.language===e}).sort(function(a,e){return e.nbOutputs-a.nbOutputs}).slice(0,1)}$(document).ready(function(){$(".ui.dropdown").dropdown(),$("#languagePairs .menu").text(defaultLP),$("#languagePairs .menu").html(languagePairs.map(function(a){var e="";return a.sourceLanguage+a.targetLanguage===getLanguagePair()&&(e=" active",$("#languagePairs .text").text(c2l[a.sourceLanguage]+" - "+c2l[a.targetLanguage])),['<div class="item',e,'" data-value="',a.sourceLanguage,a.targetLanguage,'">',c2l[a.sourceLanguage]," - ",c2l[a.targetLanguage],"</div>"].join("")}).join("")),$("#languagePairs").dropdown({onChange:function(a,e){getTable(getLanguagePair())}}),$("#addSystemButton").on("click",function(){$('#addSystemForm input[name="languagePair"]').val(getLanguagePair()),$("#addSystemForm").submit()}),$("#addSystemButton").on("keypress",function(a){13!==a.which&&32!==a.which||(a.preventDefault(),$(a.target).trigger("click"))}),getTable(getLanguagePair())});