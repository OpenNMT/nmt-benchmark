function getTable(e){var t={};e&&(t={sourceLanguage:e.substring(0,2),targetLanguage:e.substring(2)}),$.get("/getDataTable",t).done(function(e){var t=[{data:"user",sDefaultContent:"",render:function(e,t,a){if(e)return'<a href="/userSystems/'+e.githubId+'"><img class="ui avatar image" src="'+e.avatarURL+'" alt="'+e.name+'"/><span class="userName">'+e.name+"</span></a>"}},{data:"systemName",className:"systemName",sDefaultContent:"",render:function(e,t,a){if(e)return'<a href="/translationSystem/view/'+a._id+'">'+e+"</a>"}},{data:"constraint",sDefaultContent:"",render:function(e,t,a){return e?"Yes":"No"}},{data:"date",sDefaultContent:"",render:function(e,t,a){if(e){var n=new Date(e);return n.toLocaleDateString()}}},{data:"scores",className:"scores",sDefaultContent:"",render:function(e,t,a){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push('<div class="testFile id_'+i+'">'+e[i].BLEU+"</div>");return n.join("")}}];$("#mainTable table").DataTable({destroy:!0,searching:!1,info:!1,stateSave:!0,pagingType:"full_numbers",dom:"ftp",sAjaxDataProp:"",order:[[2,"desc"]],data:e.data,columns:t,drawCallback:function(e){$(".pagination.menu").addClass("floated right"),$("i.toggle.icon").popup(),swapScores($('input[name="testSet"]').val())}})}).fail(function(e){flash("error",e),console.log(e.statusText,e)})}function swapScores(e){function t(e){var t=$(".scores .id_"+e);t.transition({duration:a.duration.show,animation:a.animation.show})}var a={animation:{show:"fade left",hide:"fade right"},duration:{show:750,hide:250}},n=getTestFileId(),i=$(".scores .testFile:visible"),o=0;i.length?$.each(i,function(){$(this).transition({duration:a.duration.hide,animation:a.animation.hide,onComplete:function(){o++,o===i.length&&t(n)}})}):t(n)}function getTestFileId(){return $('input[name="testSet"]').val()||""}$(document).ready(function(){$(".ui.dropdown").dropdown(),$("#languagePairs .menu").text(defaultLP),setDropdownContent("include Any language pair"),setTestFileDropdownContent(getLanguagePair()),$("#languagePairs").dropdown({onChange:function(e,t){getTable(getLanguagePair())}}),$("#testFile").dropdown({onChange:function(e,t){swapScores(e)}}),$("#addSystemButton").on("click",function(){$('#addSystemForm input[name="languagePair"]').val(getLanguagePair()),$("#addSystemForm").submit()}),$("#addSystemButton").on("keypress",function(e){13!==e.which&&32!==e.which||(e.preventDefault(),$(e.target).trigger("click"))}),getTable()});